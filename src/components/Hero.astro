---
// pull hero data from frontmatter with backwards compatibility for old fields
const frontmatter = Astro.props.frontmatter
const hero = frontmatter.hero ?? {}
const { image, video } = hero

const title = frontmatter.heroTitle ?? hero.title
const subtitle = frontmatter.description ?? hero.subtitle
const ctaText = frontmatter.ctaText ?? hero?.cta?.text
const ctaLink = frontmatter.ctaLink ?? hero?.cta?.href
---

<div
  class="relative overflow-hidden rounded-xl h-[clamp(300px,40vh,400px)]"
>
  {
    video ? (
      <video
        src={video}
        poster={image}
        autoplay
        muted
        loop
        playsinline
        aria-hidden="true"
        class="absolute inset-0 w-full h-full object-cover"
      />
    ) : (
      <img
        src={image}
        alt=""
        loading="lazy"
        class="absolute inset-0 w-full h-full object-cover"
      />
    )
  }
  <div class="absolute inset-0 z-10 pointer-events-none bg-gradient-to-b from-transparent to-black/40"></div>

  <div
    class="relative z-20 w-full flex min-h-full flex-col p-4 sm:p-6 lg:p-8"
  >
    <!-- Top-left text -->
    <div class="max-w-lg">
      <h1
        class="font-display text-3xl sm:text-5xl lg:text-6xl text-white drop-shadow-md"
      >
        {title}
      </h1>
      {subtitle && (
        <p class="mt-2 md:mt-4 text-lg sm:text-xl text-white/90 drop-shadow-sm">
          {subtitle}
        </p>
      )}
    </div>

    <!-- Bottom-right CTA -->
    {ctaText && ctaLink && (
    <div class="self-end mt-auto">
      <a
        href={ctaLink}
        class="inline-block py-3 px-6 rounded-lg font-medium bg-white text-black shadow-md transition transform hover:shadow-xl hover:scale-105"
      >
          {ctaText}
        </a>
      </div>
    )}
  </div>
</div>
